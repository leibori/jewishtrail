(this["webpackJsonpjewish_trail_2.0"]=this["webpackJsonpjewish_trail_2.0"]||[]).push([[0],{139:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(31),c=a.n(i),s=(a(98),a(9)),o=a(10),l=a(12),u=a(11),h=a(8),m=a(13),d=a(14),p=a(37),f=a(2),b=a.n(f),g=a(5),v=a(77),E=a.n(v),y=(a(100),a(101),a(102),E.a.initializeApp({apiKey:"AIzaSyDxnwrW4yBF4d0QDXoFSCF9FBNDauq68gE",authDomain:"jewish-trail.firebaseapp.com",databaseURL:"https://jewish-trail.firebaseio.com",projectId:"jewish-trail",storageBucket:"jewish-trail.appspot.com",messagingSenderId:"1060927552672",appId:"1:1060927552672:web:7288a483d83a16b7da9dc5",measurementId:"G-D4K9DSRZ0K"})),k=y.firestore(),w=y.functions(),x=a(90);function S(e,t,a){return j.apply(this,arguments)}function j(){return(j=Object(g.a)(b.a.mark((function e(t,a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,k.collection(n).get();case 3:return e.sent.forEach((function(e){var i=0,c=e.data().searchTokens;t.forEach((function(e){c.includes(e)&&++i})),i>=a&&r.push({counter:i,document:e,type:n})})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return C.apply(this,arguments)}function C(){return(C=Object(g.a)(b.a.mark((function e(t,a){var n,r,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=Math.ceil(t.length/2),r=[],i=[],c=0;c<t.length;++c)t[c]=t[c].toLowerCase();c=0;case 5:if(!(c<a.length)){e.next=14;break}return e.t0=r,e.next=9,S(t,n,a[c]);case 9:e.t1=e.sent,r=e.t0.concat.call(e.t0,e.t1);case 11:++c,e.next=5;break;case 14:if(0!=r.length){e.next=16;break}return e.abrupt("return",i);case 16:return(r=x.a.sortBy(r,"counter").reverse()).forEach((function(e){i.push({name:e.document.data().name,city:e.document.data().city,country:e.document.data().country,tags:e.document.data().tags,id:e.document.id,type:e.type})})),e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return L.apply(this,arguments)}function L(){return(L=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,k.collection("sites").where("country","==",t).get();case 3:return e.sent.docs.forEach((function(e){var t=e.data();a.push({id:e.id,name:t.name,address:t.address,partialInfo:t.partialInfo,latitude:t.latitude,longitude:t.longitude})})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return R.apply(this,arguments)}function R(){return(R=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("roads").doc(t).get();case 2:return e.abrupt("return",e.sent.data());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=a(17),A=a.n(F),T="https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw",U="Map data \xa9 OpenStreetMap contributors, CC-BY-SA, Imagery \xa9 Mapbox",D=A.a.icon({iconUrl:"http://www.clker.com/cliparts/k/a/2/B/c/u/map-marker-red-th.png",iconSize:[24.8,39.6],iconAnchor:[12.4,39.6],popupAnchor:[0,-30]});function B(e,t,a,n,r){var i=function(e){var t=A.a.layerGroup();return e.forEach((function(e){var a=A.a.marker([e.latitude,e.longitude],{icon:D}).addTo(t),n="<a href='/site/"+e.id+"'>More info</a>";a.bindPopup("<b>"+e.name+"</b><br/>"+e.address+"<br/>"+e.partialInfo+"<br/>"+n)})),t}(r),c=A.a.tileLayer(T,{id:"mapbox/streets-v11",maxZoom:18,minZoom:1.5,tileSize:512,zoomOffset:-1,attribution:U}),s=A.a.tileLayer(T,{id:"mapbox/satellite-v9",maxZoom:18,minZoom:1.5,tileSize:512,zoomOffset:-1,attribution:U}),o=A.a.tileLayer(T,{id:"mapbox/satellite-streets-v11",maxZoom:18,minZoom:1.5,tileSize:512,zoomOffset:-1,attribution:U}),l=A.a.map(e,{center:[t,a],zoom:n,zoomControl:!1,layers:[c,i]}),u={Streets:c,Sattelite:s,"Sattelite and streets":o},h={Sites:i};A.a.control.layers(u,h).addTo(l)}var I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={location:{lat:41.294856,lng:-4.055685},zoom:5,country:"",haveUsersLocation:!1,markers:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return navigator.geolocation.getCurrentPosition((function(e){fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(e){a.setState({country:e.country_name})})),a.setState({location:{lat:e.coords.latitude,lng:e.coords.longitude},haveUsersLocation:!0,zoom:13})}),(function(){console.log("access denied"),fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({location:{lat:e.latitude,lng:e.longitude},country:e.country_name,haveUsersLocation:!0,zoom:13})}))})),e.next=3,N("Spain");case 3:t=e.sent,this.setState({markers:t}),B("map",this.state.location.lat,this.state.location.lng,this.state.zoom,t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,'Welcome to the "Jewish Trail" project.'),r.a.createElement("p",null,"Our goal is to strenghen the bond between the jewish people around the world by improving access to our shared history and heritage."),r.a.createElement("p",null,"Feel free to go on a journey and rediscover the marks the we left on the world and in the history books."),r.a.createElement("div",{style:{height:"400px",width:"90%",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -10%)"},id:"map"}))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={action:""},a.activeAction=function(e){a.setState({action:e.target.id})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h5",{className:"black-text text-darken-3",style:{marginLeft:"-210px"}},"Welcome to Site Management. choose an Option:"),r.a.createElement("button",{className:"btn pink lighten-1",id:"create"},r.a.createElement(d.b,{to:"/createSite",className:"white-text"},"Create new Site")),r.a.createElement("button",{className:"btn pink lighten-1",style:{marginLeft:"30px"},id:"delete"},r.a.createElement(d.b,{className:"white-text",to:"/deleteSite"},"Delete Site")),r.a.createElement("button",{className:"btn pink lighten-1",style:{marginLeft:"30px"},id:"change"},r.a.createElement(d.b,{className:"white-text",to:"/updateSite"},"Update Site")))}}]),t}(n.Component),z=a(26),P=a(48);function q(){return W.apply(this,arguments)}function W(){return(W=Object(g.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new P.auth.GoogleAuthProvider,e.next=3,P.auth().setPersistence(P.auth.Auth.Persistence.SESSION);case 3:return e.next=5,P.auth().signInWithPopup(t);case 5:return a=y.auth().currentUser,e.next=8,J(a.uid);case 8:if(!e.sent){e.next=10;break}return e.abrupt("return",a.uid);case 10:return n=a.displayName,Z(a.uid,n).then((function(e){return console.log(e)})),e.abrupt("return",a.uid);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return G.apply(this,arguments)}function G(){return(G=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("accounts").doc(t).get();case 2:if(!e.sent.exists){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(g.a)(b.a.mark((function e(t,a,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),y.auth().createUserWithEmailAndPassword(a,n).then((function(e){Z(e.user.uid,r)})).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(g.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,k.collection("accounts").doc(t).set({user_name:a,favorites:[]});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=a(22),K=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).googleLogin=function(){var t=Object(g.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,q();case 3:n=t.sent,console.log(n),e.setState({online:!0,uid:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChange=function(t){e.setState(Object(z.a)({},t.target.name,t.target.value))},e.onSignUpClick=function(t){t.preventDefault(),e.props.history.push("/SignUp")},e.state={email:"",password:"",online:!1,uid:""},e.googleLogin=e.googleLogin.bind(Object(h.a)(e)),e.onChnage=e.onChange.bind(Object(h.a)(e)),e.onSignUpClick=e.onSignUpClick.bind(Object(h.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.auth().onAuthStateChanged(function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a?t.setState({online:!0}):t.setState({online:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.state.online)return r.a.createElement(p.a,{to:"/Menu"});var t=this.state,a=t.email,n=t.password;return r.a.createElement(H.f,null,r.a.createElement(H.l,{className:"mt-2 mb-3 d-flex justify-content-center"},r.a.createElement(H.e,{md:"4"},r.a.createElement(H.c,null,r.a.createElement("div",{className:"header pt-3 blue-gradient"},r.a.createElement(H.l,{className:"d-flex justify-content-center"},r.a.createElement("h1",{className:"white-text mb-3 pt-3 font-weight-bold"},"Log in")),r.a.createElement(H.l,{className:"mt-2 mb-3 d-flex justify-content-center"},r.a.createElement("a",{onClick:this.googleLogin,className:"fa-lg p-2 m-2 gplus-ic"},r.a.createElement(H.g,{fab:!0,icon:"fa-google-plus-g",className:"fa-google-plus-g white-text fa-lg"})))),r.a.createElement(H.d,{className:"mx-4"},r.a.createElement("form",{onSubmit:function(e){return function(e,t,a){e.preventDefault(),y.auth().signInWithEmailAndPassword(t,a).then((function(e){console.log("logged in"+y.auth().currentUser)})).catch((function(e){console.log(e)}))}(e,a,n)}},r.a.createElement("div",{className:"md-form mt-3"},r.a.createElement("i",{className:"fa fas-envelope prefix grey-text"}),r.a.createElement("input",{required:!0,name:"email",onChange:this.onChange,type:"email",id:"materialSubscriptionFormPasswords",className:"form-control"}),r.a.createElement("label",{htmlFor:"materialSubscriptionFormPasswords"}," Email...")),r.a.createElement("div",{className:"md-form mt-3"},r.a.createElement("i",{className:"fa fa-lock prefix grey-text"}),r.a.createElement("input",{required:!0,type:"password",name:"password",onChange:this.onChange,id:"materialSubscriptionFormPasswords",className:"form-control"}),r.a.createElement("label",{htmlFor:"materialSubscriptionFormPasswords"},"Password...")),r.a.createElement("div",{style:{margin:"auto"},className:"text-center mb-3"},r.a.createElement(H.b,{type:"submit",gradient:"blue",rounded:!0,className:"z-depth-1a",style:{borderRadius:"18px"}},"LOGIN")))),r.a.createElement(H.i,{className:"mx-auto pt-3 mb-1 justify-content-center"},r.a.createElement("p",{align:"center",className:"font-small grey-text d-flex"},"Not a member?",r.a.createElement("a",{onClick:this.onSignUpClick,className:"blue-text ml-1"},"Sign Up"),"\xa0Or",r.a.createElement("a",{onClick:function(t){return e.props.history.push("/Menu")},className:"blue-text ml-1"},"Enter as a guest")))))))}}]),t}(n.Component),Q=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).googleLogin=function(){var t=Object(g.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,q();case 3:n=t.sent,console.log(n),e.setState({online:!0,uid:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSignup=function(t){var a=e.state,n=a.email,r=a.password,i=a.username;t.preventDefault(),function(e,t,a,n){_.apply(this,arguments)}(t,n,r,i),e.props.history.push("/Menu")},e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.state={online:"",email:"",password:"",username:""},e.onSignup=e.onSignup.bind(Object(h.a)(e)),e.handleChange=e.handleChange.bind(),e.googleLogin=e.googleLogin.bind(Object(h.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.auth().onAuthStateChanged(function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a?t.setState({online:!0}):t.setState({online:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(z.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){if(this.state.online)return r.a.createElement(p.a,{to:"/Menu"});var e=this.state;e.email,e.password,e.username;return r.a.createElement(H.f,null,r.a.createElement(H.l,{className:"mt-2 mb-3 d-flex justify-content-center"},r.a.createElement(H.e,{md:"4"},r.a.createElement(H.c,null,r.a.createElement("div",{className:"header pt-3 blue-gradient"},r.a.createElement(H.l,{className:"d-flex justify-content-center"},r.a.createElement("h1",{className:"white-text mb-3 pt-3 font-weight-bold"},"Sign Up")),r.a.createElement(H.l,{className:"mt-2 mb-3 d-flex justify-content-center"},r.a.createElement("a",{onClick:this.googleLogin,className:"fa-lg p-2 m-2 gplus-ic"},r.a.createElement(H.g,{fab:!0,className:"fa-google-plus-g white-text fa-lg"})))),r.a.createElement(H.d,{className:"mx-4"},r.a.createElement("h3",{align:"center",className:"blue-text mb-3 pt-3 font-weight-bold"},"Start your trail today!"),r.a.createElement("form",{onSubmit:this.onSignup},r.a.createElement("div",{className:"md-form mt-3"},r.a.createElement("i",{className:"fa fa-envelope prefix grey-text"}),r.a.createElement("input",{required:!0,name:"email",onChange:this.handleChange,type:"email",id:"materialSubscriptionFormPasswords",className:"form-control"}),r.a.createElement("label",{htmlFor:"materialSubscriptionFormPasswords"}," Email...")),r.a.createElement("div",{className:"md-form mt-3"},r.a.createElement("i",{className:"fa fa-lock prefix grey-text"}),r.a.createElement("input",{required:!0,type:"password",name:"password",onChange:this.handleChange,id:"materialSubscriptionFormPasswords",className:"form-control"}),r.a.createElement("label",{htmlFor:"materialSubscriptionFormPasswords"},"Password...")),r.a.createElement("div",{className:"md-form mt-3"},r.a.createElement("i",{className:"fa fa-user prefix grey-text"}),r.a.createElement("input",{required:!0,type:"text",name:"username",onChange:this.handleChange,id:"materialSubscriptionFormPasswords",className:"form-control"}),r.a.createElement("label",{htmlFor:"materialSubscriptionFormPasswords"},"Username...")),r.a.createElement("div",{style:{margin:"auto"},className:"text-center mb-3"},r.a.createElement(H.b,{type:"submit",gradient:"blue",rounded:!0,className:"z-depth-1a",style:{borderRadius:"18px"}},"Sign up"))))))))}}]),t}(n.Component),X=function(e){var t=e.props,a="/site/"+t.id;return r.a.createElement("div",{className:"card z-depth-0 project-summary"},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("div",{className:"site-name "},"Site name: ",t.name),r.a.createElement("div",{className:"site-city "},"City: ",t.city),r.a.createElement("div",{className:"site-country "},"Country: ",t.country),r.a.createElement("div",{className:"container"},t.tags.map((function(e,t){return r.a.createElement("span",{key:t}," ",e," ")}))),r.a.createElement(d.b,{to:a},"More info")))},$=a(32),ee=function(e){function t(e){var a;Object(s.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e));var n=e.buttonName,r=e.onClickMethod,i=e.canRenderButton,c=e.searchVal,o=e.returnTo;return a.state={haveSearched:!1,searchVal:c?c.split(" "):[],siteList:[],buttonName:n,returnTo:o},a.onClickMethod=r?r.bind(Object(h.a)(a)):null,a.canRenderButton=i?i.bind(Object(h.a)(a)):null,a.onSearchButtonClicked=a.onSearchButtonClicked.bind(Object(h.a)(a)),a.updateSearchValue=a.updateSearchValue.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onSearchButtonClicked",value:function(e){e.preventDefault(),console.log(this.state.searchVal),window.location.href="/"+this.state.returnTo+"/"+this.state.searchVal}},{key:"executeSearch",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(this.state.searchVal,["sites"]);case 2:t=e.sent,this.setState({siteList:t,haveSearched:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateSearchValue",value:function(e){this.setState({searchVal:e.target.value})}},{key:"componentWillMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.searchVal.length>=1)){e.next=3;break}return e.next=3,this.executeSearch();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.buttonName,n=t.siteList;return r.a.createElement("div",null,r.a.createElement("form",{ref:this.form,id:"search-form"},r.a.createElement("div",{className:"search-field"},r.a.createElement("input",{ref:this.searchVal,onChange:this.updateSearchValue,type:"text",required:!0})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.onSearchButtonClicked,type:"submit"},"Search")),r.a.createElement("p",{className:"error pink-text center-align"})),r.a.createElement("div",{className:"container"},0!==n.length&&r.a.createElement($.a,{list:n,itemsPerPage:3,renderList:function(t){return t.map((function(t,n){return r.a.createElement("div",{key:n},r.a.createElement(X,{key:n,props:t}),e.onClickMethod&&a&&e.canRenderButton(t.id)&&r.a.createElement("button",{onClick:function(a){return e.onClickMethod(a,t.id)}},a))}))}})),0!=this.state.searchVal.length&&0==this.state.siteList.length&&this.state.haveSearched?r.a.createElement("h5",null,"No matches found."):"")}}]),t}(n.Component),te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSiteButtonClick=function(e,t){a.props.history.push("/updateForm/"+t)},a.state={searchVal:e.match.params.searchVal?e.match.params.searchVal:"",siteList:[],chosenSite:null,changingFlag:!1},a.onSearchButtonClicked=a.onSearchButtonClicked.bind(Object(h.a)(a)),a.updateSearchValue=a.updateSearchValue.bind(Object(h.a)(a)),a.updateTopDownhValue=a.updateTopDownhValue.bind(Object(h.a)(a)),a.onSiteButtonClick=a.onSiteButtonClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onSearchButtonClicked",value:function(){var e=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O(this.state.topDownValue,this.state.searchVal);case 3:(a=e.sent).length||alert("no Result"),this.setState({siteList:a});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateSearchValue",value:function(e){this.setState({searchVal:e.target.value})}},{key:"updateTopDownhValue",value:function(e){this.setState({topDownValue:e.value})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h5",{className:"grey-text text-darken-3"},"Search Site to Update"),r.a.createElement(ee,{onClickMethod:this.onSiteButtonClick,buttonName:"Update site",canRenderButton:function(){return!0},searchVal:this.state.searchVal,returnTo:"updateSite"}),r.a.createElement("button",{className:"btn pink lighten-1",type:"button"},r.a.createElement(d.b,{className:"white-text",to:"/adminPage"},"Return to Admin Menu")))}}]),t}(n.Component),ae=a(25);function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("sites").add({name:t.name,city:t.city,country:t.country,tags:t.tags,adress:t.adress,externalSourceUrl:t.externalSourceUrl,imageUrl:t.imageUrl,fullInfo:t.fullInfo,partialInfo:t.partialInfo,latitude:t.latitude,longitude:t.longitude});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("sites").doc(t.id).update({name:t.name,city:t.city,country:t.country,tags:t.tags,adress:t.adress,externalSourceUrl:t.externalSourceUrl,imageUrl:t.imageUrl,fullInfo:t.fullInfo,partialInfo:t.partialInfo,latitude:t.latitude,longitude:t.longitude});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("sites").doc(t.id).delete();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(g.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","guest");case 2:return a="registered",e.next=5,t.getIdTokenResult();case 5:return n=e.sent,t.admin=n.claims.admin,t.admin?a="admin":(console.log("is registered"),a="registered"),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return me.apply(this,arguments)}function me(){return(me=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("accounts").doc(t).get();case 2:return a=e.sent,e.abrupt("return",a.data().favorites);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("accounts").doc(t).get();case 2:return a=e.sent,e.abrupt("return",a.data().RoadsFavorites);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){return be.apply(this,arguments)}function be(){return(be=Object(g.a)(b.a.mark((function e(t){var a,n,r,i,c,s,o,l,u,h,m;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,he(t);case 3:n=e.sent,r=0,i=!0,c=!1,s=void 0,e.prev=8,o=n[Symbol.iterator]();case 10:if(i=(l=o.next()).done){e.next=21;break}return u=l.value,e.next=14,k.collection("sites").doc(u).get();case 14:h=e.sent,m=h.data(),a.push({tags:m.tags,name:m.name,city:m.city,country:m.country,id:r,uid:u}),r+=1;case 18:i=!0,e.next=10;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(8),c=!0,s=e.t0;case 27:e.prev=27,e.prev=28,i||null==o.return||o.return();case 30:if(e.prev=30,!c){e.next=33;break}throw s;case 33:return e.finish(30);case 34:return e.finish(27);case 35:return e.abrupt("return",a);case 36:case"end":return e.stop()}}),e,null,[[8,23,27,35],[28,,30,34]])})))).apply(this,arguments)}function ge(e,t){return ve.apply(this,arguments)}function ve(){return(ve=Object(g.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("accounts").doc(t).update({favorites:a}).catch((function(e){console.error("Error removing document: ",e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("sites").doc(t).get();case 2:return e.abrupt("return",e.sent.data());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return we.apply(this,arguments)}function we(){return(we=Object(g.a)(b.a.mark((function e(t){var a,n,r,i,c,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.siteListID,n=t.roadName,r=t.roadDescription,i=t.CityList,c=t.CountryList,s=t.TagList,o=t.searchTokens,console.log(s),e.next=4,k.collection("roads").add({name:n,description:r,siteList:a,city:i,country:c,tags:s,searchTokens:o});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e,t){return Se.apply(this,arguments)}function Se(){return(Se=Object(g.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("accounts").doc(t).update({RoadsFavorites:a}).catch((function(e){console.error("Error removing document: ",e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.collection("roads").doc(t.id).delete();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(z.a)({},e.target.id,e.target.value))},a.addToken=function(e){a.setState({tags:[].concat(Object(ae.a)(a.state.tags),[""])})},a.deleteTag=function(e,t){var n=Object(ae.a)(a.state.tags);n.splice(t,1),a.setState({tags:n})},console.log(e),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.state={tags:[],Name:"",city:"",country:"",adress:"",externalSourceUrl:"",imageUrl:"",fullInfo:"",partialInfo:"",latitude:null,longitude:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleChangeTokens",value:function(e,t){this.state.tags[t]=e.target.value,this.setState({tags:this.state.tags})}},{key:"handleSubmit",value:function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=Array.from(new Set([].concat(Object(ae.a)(this.state.tags),[this.state.city,this.state.city],Object(ae.a)(this.state.name.split(" "))))),console.log(a),n={name:this.state.name,city:this.state.city,country:this.state.country,tags:this.state.tags,adress:this.state.adress,externalSourceUrl:this.state.externalSourceUrl,imageUrl:this.state.imageUrl,fullInfo:this.state.fullInfo,partialInfo:this.state.partialInfo,latitude:parseFloat(this.state.latitude),longitude:parseFloat(this.state.longitude),searchTokens:a},e.next=6,ne(n);case 6:alert("created a new site"),this.props.history.push("/adminPage");case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Create a New Site"),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)},id:"create-site-form"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"text",id:"name",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"name"}," Site Name")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"city",className:"materialize-textarea",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"city"}," City Name")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"country",className:"materialize-textarea",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"country"}," Country Name")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"adress",className:"materialize-textarea",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"adress"},"  Address")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"externalSourceUrl",className:"materialize-textarea",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"externalSourceUrl"}," External Url Link")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"imageUrl",className:"materialize-textarea",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"imageUrl"}," Image Url Link")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"fullInfo",className:"materialize-textarea",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"fullInfo"}," Enter Description")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"partialInfo",className:"materialize-textarea",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"partialInfo"}," Enter Marker Description")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"latitude",className:"materialize-textarea",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"latitude"}," Enter latitude")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"longitude",className:"materialize-textarea",onChange:this.handleChange,required:!0}),r.a.createElement("label",{htmlFor:"longitude"}," Enter longitude")),r.a.createElement("label",null,"Tags"),this.state.tags.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("input",{onChange:function(t){return e.handleChangeTokens(t,a)},value:t}),r.a.createElement("button",{type:"button",onClick:function(t){return e.deleteTag(a)}}," Delete Tag"))})),r.a.createElement("hr",null),r.a.createElement("button",{type:"button",id:"token",onClick:this.addToken},"Add Tag"),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{type:"submit",className:"btn pink lighten-1",color:"red"},"Create Site"),r.a.createElement("button",{style:{marginLeft:"50px"},type:"button",className:"btn pink lighten-1"},r.a.createElement(d.b,{className:"white-text",to:"/adminPage"},"Return to Admin Menu")))))}}]),t}(n.Component),Ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).DeleteSite=function(){var e=Object(g.a)(b.a.mark((function e(t,n){var r,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.myRef.current.state.siteList,t.preventDefault(),console.log(r),i=r.find((function(e){return e.id===n})),c=r.indexOf(i),e.next=7,se(i);case 7:console.log("site"+i.name+"had deleted"),r.splice(c,1),a.setState({siteList:r});case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.myRef=r.a.createRef(),a.state={searchVal:e.match.params.searchVal?e.match.params.searchVal:"",topDownValue:"tags"},a.onSearchButtonClicked=a.onSearchButtonClicked.bind(Object(h.a)(a)),a.updateSearchValue=a.updateSearchValue.bind(Object(h.a)(a)),a.updateTopDownhValue=a.updateTopDownhValue.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onSearchButtonClicked",value:function(){var e=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O(this.state.topDownValue,this.state.searchVal);case 3:a=e.sent,this.setState({siteList:a});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateSearchValue",value:function(e){this.setState({searchVal:e.target.value})}},{key:"updateTopDownhValue",value:function(e){this.setState({topDownValue:e.value})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h5",{className:"grey-text text-darken-3"},"Search Site to Delete"),r.a.createElement(ee,{ref:this.myRef,siteList:this.state.siteList,onClickMethod:this.DeleteSite,buttonName:"Delete site",canRenderButton:function(){return!0},searchVal:this.state.searchVal,returnTo:"deleteSite"}),r.a.createElement("button",{className:"btn pink lighten-1"},r.a.createElement(d.b,{className:"white-text",to:"/adminPage"},"Return to Admin Menu")))}}]),t}(n.Component),Le=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("p",null," Welcome to Admin Menu, Please select a Option:"),r.a.createElement("button",{className:"btn pink lighten-1"},r.a.createElement(d.b,{className:"white-text",to:"/adminPage"},"Site Management")),r.a.createElement("button",{style:{marginLeft:"30px"},className:"btn pink lighten-1"},r.a.createElement(d.b,{className:"white-text",to:"/auth"},"Users Management")))}}]),t}(n.Component),Ve=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={action:"",email:""},a.handleChange=function(e){a.setState(Object(z.a)({},e.target.id,e.target.value))},a.deleteUser=function(e){var t=a.state.email;console.log(t),a.setState({email:""}),w.httpsCallable("deleteUserByEmails")({email:t}).then((function(e){alert(e.data.message),a.props.history.push("/admin")}))},a.createAdmin=function(e){var t=a.state.email;console.log(t),a.setState({email:""}),w.httpsCallable("addAdminRole")({email:t}).then((function(e){console.log(e),alert(e.data.message),a.props.history.push("/admin")}))},a.activeAction=function(e){a.setState({action:e.target.id})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.action;return"deleteUser"===e?r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"email",onChange:this.handleChange,placeholder:"Email Address",value:this.state.email}),r.a.createElement("button",{className:"btn pink lighten-1",id:"deleteUser",onClick:this.deleteUser},"Delete User Via Email"),r.a.createElement("button",{style:{marginLeft:"50px"},className:"btn pink lighten-1",id:"",onClick:this.activeAction},"Retrun")):"createAdmin"===e?r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"email",onChange:this.handleChange,placeholder:"Email Address",value:this.state.email}),r.a.createElement("button",{className:"btn pink lighten-1",id:"deleteUser",onClick:this.createAdmin},"Create Admin Via Email"),r.a.createElement("button",{style:{marginLeft:"50px"},className:"btn pink lighten-1",id:"",onClick:this.activeAction},"Retrun")):r.a.createElement("div",{className:"container"},r.a.createElement("h5",{className:"black-text text-darken-3"},"Admin Authorities Options:"),r.a.createElement("button",{className:"btn pink lighten-1",id:"createAdmin",onClick:this.activeAction},"Add Admin Via Email"),r.a.createElement("button",{style:{marginLeft:"30px"},className:"btn pink lighten-1",id:"deleteUser",onClick:this.activeAction},"Delete User"),r.a.createElement("p",null,"please choose option"),r.a.createElement(d.b,{className:"btn blue lighten-1",to:"/admin"},"Return to Admin Menu"))}}]),t}(n.Component),Re=function(e){var t=e.props,a="/road/"+t.id;return r.a.createElement("div",{className:"card z-depth-0 project-summary"},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("div",{className:"site-name "},"Road name: ",t.name),r.a.createElement("div",{className:"site-city "},"Cities: ",t.city.join(", "),"."),r.a.createElement("div",{className:"site-country "},"Countries: ",t.country.join(", "),"."),r.a.createElement("div",{className:"container"},t.tags.map((function(e,t){return r.a.createElement("span",{key:t}," ",e," ")}))),r.a.createElement(d.b,{to:a},"More info")))},Fe=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).siteFilterClicked=function(){a.state.roadFilter?a.setState({siteFilter:!0,roadFilter:!1}):a.setState({roadFilter:!0})},a.roadFilterClicked=function(){a.state.siteFilter?a.setState({siteFilter:!1,roadFilter:!0}):a.setState({siteFilter:!0})},a.resultsFilter=function(e){return a.state.siteFilter&&"sites"==e.type||a.state.roadFilter&&"roads"==e.type};var n=e.buttonName,r=e.onRoadClickMethod,i=e.onSiteClickMethod,c=e.canRenderButtonSite,o=e.canRenderButtonRoad,m=e.searchVal,d=e.returnTo;return a.state={haveSearched:!1,searchVal:m?m.split(" "):[],searchResult:[],buttonName:n,returnTo:d,siteFilter:!0,roadFilter:!0},a.onSiteClickMethod=i?i.bind(Object(h.a)(a)):null,a.onRoadClickMethod=r?r.bind(Object(h.a)(a)):null,a.canRenderButtonSite=c?c.bind(Object(h.a)(a)):null,a.canRenderButtonRoad=o?o.bind(Object(h.a)(a)):null,a.onSearchButtonClicked=a.onSearchButtonClicked.bind(Object(h.a)(a)),a.updateSearchValue=a.updateSearchValue.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onSearchButtonClicked",value:function(e){e.preventDefault(),console.log(this.state.searchVal),window.location.href="/"+this.state.returnTo+"/"+this.state.searchVal}},{key:"executeSearch",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(this.state.searchVal,["sites","roads"]);case 2:t=e.sent,this.setState({searchResult:t,haveSearched:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateSearchValue",value:function(e){this.setState({searchVal:e.target.value})}},{key:"componentWillMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.searchVal.length>=1)){e.next=3;break}return e.next=3,this.executeSearch();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.roadFilter?"white":"yellow",a=this.state.siteFilter?"white":"yellow",n=this.state,i=n.buttonName,c=n.searchResult;return r.a.createElement("div",null,r.a.createElement("form",{ref:this.form,id:"search-form"},r.a.createElement("div",{className:"search-field"},r.a.createElement("input",{value:this.state.haveSearched?this.state.searchVal.join(" "):this.state.searchVal,ref:this.searchVal,onChange:this.updateSearchValue,type:"text",required:!0})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.onSearchButtonClicked,type:"submit"},"Search")),r.a.createElement("p",{className:"error pink-text center-align"})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.siteFilterClicked,style:{backgroundColor:t}},"Sites"),r.a.createElement("button",{onClick:this.roadFilterClicked,style:{backgroundColor:a}},"Roads")),r.a.createElement("div",{className:"container"},0!==c.length&&r.a.createElement($.a,{list:c.filter(this.resultsFilter),itemsPerPage:3,renderList:function(t){return t.map((function(t,a){return r.a.createElement("div",{key:a},"sites"===t.type&&e.state.siteFilter?r.a.createElement("div",null,r.a.createElement(X,{key:a,props:t}),e.onSiteClickMethod&&i&&e.canRenderButtonSite(t.id)&&r.a.createElement("button",{onClick:function(a){return e.onSiteClickMethod(a,t.id)}},i)):"roads"===t.type&&e.state.roadFilter?r.a.createElement("div",null,r.a.createElement(Re,{key:a,props:t}),e.onRoadClickMethod&&i&&e.canRenderButtonRoad(t.id)&&r.a.createElement("button",{onClick:function(a){return e.onRoadClickMethod(a,t.id)}},i)):"")}))}})),0!=this.state.searchVal.length&&0==this.state.searchResult.length&&this.state.haveSearched?r.a.createElement("h5",null,"No matches found."):"")}}]),t}(n.Component),Ae=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).canRenderButtonSite=function(e){return"guest"!==a.state.claim&&!a.state.siteFavoriteList.includes(e)},a.canRenderButtonRoad=function(e){return"guest"!==a.state.claim&&!a.state.roadFavoriteList.includes(e)},a.addSiteToFavorites=function(){var e=Object(g.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=a.state.siteFavoriteList).push(n),ge(a.state.userid,r),a.setState({siteFavoriteList:r});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.addRoadToFavorites=function(){var e=Object(g.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=a.state.roadFavoriteList).push(n),xe(a.state.userid,r),a.setState({roadFavoriteList:r});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.state={userid:"",claim:"guest",siteFavoriteList:[],roadFavoriteList:[],searchVal:e.match.params.searchVal?e.match.params.searchVal:""},a.canRenderButtonSite=a.canRenderButtonSite.bind(Object(h.a)(a)),a.canRenderButtonRoad=a.canRenderButtonRoad.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.auth().onAuthStateChanged(function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=14;break}return e.t0=t,e.t1=a.uid,e.next=5,le(a);case 5:return e.t2=e.sent,e.next=8,he(a.uid);case 8:return e.t3=e.sent,e.next=11,de(a.uid);case 11:e.t4=e.sent,e.t5={userid:e.t1,claim:e.t2,siteFavoriteList:e.t3,roadFavoriteList:e.t4},e.t0.setState.call(e.t0,e.t5);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(Fe,{onSiteClickMethod:this.addSiteToFavorites,onRoadClickMethod:this.addRoadToFavorites,buttonName:"Add to favorites",canRenderButtonSite:this.canRenderButtonSite,canRenderButtonRoad:this.canRenderButtonRoad,searchVal:this.state.searchVal,returnTo:"search"})}}]),t}(n.Component),Te={display:"block",color:"darkblue",fontWEIGHT:"bold"},Ue={backgroundColor:"lightBlue",color:"white",padding:"8px",border:"black",textAlight:"center",margin:"4px 2px",borderRadius:"12px"},De=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{style:Te}," About us "),r.a.createElement("div",{className:"elementor-widget-container"},r.a.createElement("p",null,r.a.createElement("strong",null,"SonShine: bringing light to the world in their memory"),", was founded by Bat-Galim and Ophir Shaer in memory of their son Gil-ad, one of the three boys kidnapped and murdered in the summer of 2014."),r.a.createElement("p",null,"\u201c",r.a.createElement("strong",null,"During the eighteen ",r.a.createElement("em",null,"(chai), "),"days of searching, worrying and not knowing what had happened to the kidnapped boys, we experienced unprecedented support from Jews all over the world. This was absolute proof of the strong feelings of mutual responsibility and the global connection felt by Jews throughout the world. Our goal is to encourage and leverage this connection and strength.")),r.a.createElement("p",null,r.a.createElement("strong",null,"The strength we discovered as individuals and as a nation during those difficult eighteen days, and the optimistic approach we chose after discovering the bitter fate of the boys, must inform our day to day lives and strengthen the spirit of every Jew throughout the world"),".\u201d \xa0Bat-Galim Shaer"),r.a.createElement("p",null,r.a.createElement("img",{className:"wp-image-1024 alignright",src:"http://sonshine.org.il/wp-content/uploads/2019/07/\u05ea\u05de\u05d5\u05e0\u05d4-\u05d6\u05d5\u05d2\u05d9\u05ea-\u05de\u05d9\u05db\u05dc-\u05d2\u05dc\u05e2\u05d3\u05d9.jpg",alt:"",width:"569",height:"379",srcSet:"http://sonshine.org.il/wp-content/uploads/2019/07/\u05ea\u05de\u05d5\u05e0\u05d4-\u05d6\u05d5\u05d2\u05d9\u05ea-\u05de\u05d9\u05db\u05dc-\u05d2\u05dc\u05e2\u05d3\u05d9.jpg 1600w, http://sonshine.org.il/wp-content/uploads/2019/07/\u05ea\u05de\u05d5\u05e0\u05d4-\u05d6\u05d5\u05d2\u05d9\u05ea-\u05de\u05d9\u05db\u05dc-\u05d2\u05dc\u05e2\u05d3\u05d9-300x200.jpg 300w, http://sonshine.org.il/wp-content/uploads/2019/07/\u05ea\u05de\u05d5\u05e0\u05d4-\u05d6\u05d5\u05d2\u05d9\u05ea-\u05de\u05d9\u05db\u05dc-\u05d2\u05dc\u05e2\u05d3\u05d9-768x512.jpg 768w, http://sonshine.org.il/wp-content/uploads/2019/07/\u05ea\u05de\u05d5\u05e0\u05d4-\u05d6\u05d5\u05d2\u05d9\u05ea-\u05de\u05d9\u05db\u05dc-\u05d2\u05dc\u05e2\u05d3\u05d9-1024x682.jpg 1024w",sizes:"(max-width: 569px) 100vw, 569px"})),r.a.createElement("p",null,"Bat-Galim (47) an educator and social activist and her husband, Ophir (48) a lawyer and tax specialist established the organization to enhance optimism and a sense of unity in Israel and throughout the world.\xa0 Its goal is to encourage a positive and constructive approach especially during times of crisis and challenge. They are the parents of six children and are among the founders and promoters of \u201cUnity Day\u201d and the \u201cJerusalem Prize for Jewish Unity."),r.a.createElement("p",null,"Bat-Galim has been its CEO since its beginning. She is an educator for over twenty years with a B.A. in History and Political Science and an M.A. in Educational Administration. She lectures in Israel and throughout the world to promote dialogue and projects to foster Jewish unity."),r.a.createElement("p",null,"The activities of the three families to promote unity and connections within Israeli society and throughout the world was formally recognized by the Government of Israel when the three mothers were honored by the privilege of lighting a torch at the National Independence Day Celebration in 2019."),r.a.createElement("p",null,"Sonshine continues to work on projects and new initiatives to foster optimism and unity among the Jewish people."),r.a.createElement("p",null,r.a.createElement("iframe",{src:"https://www.youtube.com/embed/SQuo9tAFJMA",width:"560",height:"315",frameBorder:"0",allowFullScreen:"allowfullscreen"}),r.a.createElement("iframe",{src:"https://www.youtube.com/embed/I6fOafWrTOI",width:"560",height:"315",frameBorder:"0",allowFullScreen:"allowfullscreen"}))),r.a.createElement("button",{style:Ue},r.a.createElement(d.b,{style:{color:"black"},to:"/menu"},"Retrun to main Menu")))}}]),t}(n.Component),Be=a(144),Ie=a(145),Me=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedIn:!1,isAdmin:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.auth().onAuthStateChanged(function(){var e=Object(g.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(a);case 2:"admin"===e.sent?t.setState({isAdmin:!0,isLoggedIn:!0}):a?t.setState({isLoggedIn:!0,isAdmin:!1}):t.setState({isLoggedIn:!1,isAdmin:!1});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isLoggedIn?r.a.createElement("nav",{className:"nav-wrapper dark"},r.a.createElement("div",{className:"App"},r.a.createElement(Be.a,{collapseOnSelect:!0,expand:"xl",bg:"dark",variant:"dark"},r.a.createElement(Be.a.Brand,{href:"/Menu"},"Jewish Trail"),r.a.createElement(Be.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(Be.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(Ie.a,{className:"mr-auto"},r.a.createElement(Ie.a.Link,{href:"/LogOut"},"Log Out"),r.a.createElement(Ie.a.Link,{href:"/about"},"About"),r.a.createElement(Ie.a.Link,{href:"/search"},"Search"),r.a.createElement(Ie.a.Link,{href:"/favorites"},"Favorites"),this.state.isAdmin&&r.a.createElement(Ie.a.Link,{href:"/admin"},"Admin Page")))))):r.a.createElement("nav",{className:"nav-wrapper dark"},r.a.createElement("div",{className:"App"},r.a.createElement(Be.a,{collapseOnSelect:!0,expand:"xl",bg:"dark",variant:"dark"},r.a.createElement(Be.a.Brand,{href:"/Menu"},"Jewish Trail"),r.a.createElement(Be.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(Be.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(Ie.a,{className:"mr-auto"},r.a.createElement(Ie.a.Link,{href:"/LoginPage"},"Log In "),r.a.createElement(Ie.a.Link,{href:"/about"},"About"),r.a.createElement(Ie.a.Link,{href:"/searchSite"},"Search Site"))))))}}]),t}(n.Component),ze=(n.Component,function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"logout",value:function(e){y.auth().signOut().then((function(){console.log("logged out")}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Its Time To Say Goodbye"),r.a.createElement("button",{onClick:this.logout},r.a.createElement(d.b,{to:"/"},"Logout")))}}]),t}(n.Component)),Pe=function(e){var t=e.props,a=e.deleteSite;return r.a.createElement("div",{className:"card z-depth-0 project-summary"},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("div",{className:"site-name "},"name: ",t.name),r.a.createElement("div",{className:"site-city "},"city: ",t.city),r.a.createElement("div",{className:"site-country "},"Country: ",t.country),r.a.createElement("div",{className:"container"},t.tags.map((function(e,t){return r.a.createElement("span",{key:t}," ",e," ")}))),r.a.createElement("button",{onClick:function(){return a(t.id,t.uid)}},"Delete Site")))},qe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={favoritesArr:[],userid:""},a.deleteSite=function(e,t){var n=a.state.favoritesArr.filter((function(t){return t.id!==e}));a.setState({favoritesArr:n}),a.deleteFromFirebase(e,t)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],y.auth().onAuthStateChanged(function(){var e=Object(g.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(n.uid);case 2:t=e.sent,a.setState({favoritesArr:t,userid:n.uid});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteFromFirebase",value:function(){var e=Object(g.a)(b.a.mark((function e(t,a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.userid,r=[],this.state.favoritesArr.forEach((function(e){e.uid!==a&&r.push(e.uid)})),e.next=5,k.collection("accounts").doc(n).update({favorites:r}).catch((function(e){console.error("Error removing document: ",e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},this.state.favoritesArr.map((function(t,a){return r.a.createElement(Pe,{deleteSite:e.deleteSite,key:a,props:t})})))}}]),t}(n.Component),We=a(146),Je=a(147),Ge=a(143),_e=a(148),Ze=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={site_id:e.match.params.id,name:"",city:"",country:"",address:"",fullInfo:"",imageUrl:"",externalSourceUrl:"",latitude:1,longitude:1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(this.state.site_id);case 2:t=e.sent,console.log(t),this.setState({name:t.name,city:t.city,country:t.country,address:t.address,fullInfo:t.fullInfo,imageUrl:t.imageUrl,externalSourceUrl:t.externalSourceUrl,latitude:t.latitude,longitude:t.longitude});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=[this.state.latitude,this.state.longitude];return r.a.createElement("div",null,r.a.createElement("h1",null,this.state.name),r.a.createElement("h2",null,this.state.city),r.a.createElement("h3",null,this.state.country),r.a.createElement("h4",null,this.state.address),r.a.createElement("p",null,this.state.fullInfo),r.a.createElement("img",{src:this.state.imageUrl}),r.a.createElement("a",{href:this.state.externalSourceUrl,style:{marginDown:"100px"}},"Source"),r.a.createElement("div",{style:{height:"400px",width:"60%"}},r.a.createElement(We.a,{style:{height:"400px",width:"60%"},center:e,zoom:17},r.a.createElement(Je.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.state.haveUsersLocation?r.a.createElement(Ge.a,{position:e,icon:D},r.a.createElement(_e.a,null,"A pretty CSS3 popup. ",r.a.createElement("br",null)," Easily customizable.")):"",r.a.createElement(Ge.a,{position:e,icon:D}))))}}]),t}(n.Component),Ye=a(41),He=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).renderButton=function(e){return!a.state.siteList.find((function(t){return t.id===e}))},a.addSiteToRoadList=function(){var e=Object(g.a)(b.a.mark((function e(t,n){var r,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(n);case 2:r=e.sent,i=Object(Ye.a)({},r,{id:n}),(c=a.state.siteList).push(i),a.setState({siteList:c});case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.state={userid:"",claim:"guest",searchVal:e.match.params.searchVal?e.match.params.searchVal:"",topDownValue:"tags",siteListResult:[],siteList:[],name:"",description:""},a.updateSearchValue=a.updateSearchValue.bind(Object(h.a)(a)),a.updateTopDownhValue=a.updateTopDownhValue.bind(Object(h.a)(a)),a.createNewRoadSubmit=a.createNewRoadSubmit.bind(Object(h.a)(a)),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"updateSearchValue",value:function(e){this.setState({searchVal:e.target.value})}},{key:"updateTopDownhValue",value:function(e){this.setState({topDownValue:e.value})}},{key:"createNewRoadSubmit",value:function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n,r,i,c,s,o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.state.siteList.length){e.next=4;break}return alert("no sites where selected"),e.abrupt("return");case 4:return[],n=this.state.name,r=this.state.description,i=Array.from(new Set(this.state.siteList.map((function(e){return e.city})))),c=Array.from(new Set(this.state.siteList.map((function(e){return e.country})))),s=[],Array.from(new Set(this.state.siteList.map((function(e){return e.tags})))).forEach((function(e){return e.forEach((function(e){return s.push(e)}))})),a=Array.from(new Set([].concat(s,Object(ae.a)(i),Object(ae.a)(c),Object(ae.a)(n.split(" "))))),o=[],this.state.siteList.forEach((function(e){return o.push(e.id)})),l={siteListID:o,roadName:n,roadDescription:r,CityList:i,CountryList:c,TagList:s,searchTokens:a},e.next=18,ke(l);case 18:console.log("created new road");case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeSite",value:function(e){var t=Object(ae.a)(this.state.siteList);t.splice(e,1),this.setState({siteList:t})}},{key:"handleChange",value:function(e){this.setState(Object(z.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this,t=this.state.siteList;return r.a.createElement("div",{className:"col-md"},r.a.createElement("form",null,r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{required:!0,name:"name",type:"text",id:"name",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"name"},"  Road  Name")),r.a.createElement("div",{className:"for-group"},r.a.createElement("label",null,"Road Description"),r.a.createElement("textarea",{required:!0,value:this.description,onChange:this.handleChange,type:"description",className:"form-control",name:"description",placeholder:"Road Description"})),r.a.createElement("button",{type:"submit",onClick:function(t){return e.createNewRoadSubmit(t)},className:"btn pink lighten-1"},"Submit")),r.a.createElement("ul",{className:"container"},t.length>0&&r.a.createElement($.a,{list:t,itemsPerPage:3,renderList:function(t){return t.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("li",null,r.a.createElement(X,{props:t})),r.a.createElement("button",{onClick:function(){return e.removeSite(a)}},"remove Site "))}))}})),r.a.createElement(ee,{onClickMethod:this.addSiteToRoadList,buttonName:"Add to road",canRenderButton:this.renderButton,searchVal:this.state.searchVal,returnTo:"roadForm"}))}}]),t}(n.Component),Ke=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(z.a)({},e.target.id,e.target.value))},a.addToken=function(e){a.setState({tags:[].concat(Object(ae.a)(a.state.tags),[""])})},a.deleteTag=function(e,t){var n=Object(ae.a)(a.state.tags);n.splice(t,1),a.setState({tags:n})},a.state={id:e.match.params.id,isLoaded:!1},a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.id,e.next=3,Ee(t);case 3:a=e.sent,this.setState(Object(Ye.a)({},a,{id:t,isLoaded:!0}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChangeTokens",value:function(e,t){var a=this.state.tags;a[t]=e.target.value,this.setState({tags:a})}},{key:"handleSubmit",value:function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=Array.from(new Set([].concat(Object(ae.a)(this.state.tags),[this.state.city,this.state.city],Object(ae.a)(this.state.name.split(" "))))),n={id:this.state.id,name:this.state.name,city:this.state.city,country:this.state.country,tags:this.state.tags,adress:this.state.adress,externalSourceUrl:this.state.externalSourceUrl,imageUrl:this.state.imageUrl,fullInfo:this.state.fullInfo,partialInfo:this.state.partialInfo,latitude:parseFloat(this.state.latitude),longitude:parseFloat(this.state.longitude),searchTokens:a},e.next=5,ie(n);case 5:alert(n.name+" has updated!"),this.props.history.push("/adminPage");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.isLoaded?r.a.createElement("div",{className:"container"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Update a Site"),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)},id:"create-site-form"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"text",id:"name",onChange:this.handleChange,value:this.state.name,required:!0}),r.a.createElement("label",{htmlFor:"name"},"  Site Name")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"city",className:"materialize-textarea",onChange:this.handleChange,value:this.state.city,required:!0}),r.a.createElement("label",{htmlFor:"city"},"  City Name")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"country",className:"materialize-textarea",onChange:this.handleChange,value:this.state.country,required:!0}),r.a.createElement("label",{htmlFor:"country"},"  Country Name")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"adress",className:"materialize-textarea",onChange:this.handleChange,value:this.state.adress,required:!0}),r.a.createElement("label",{htmlFor:"adress"},"  Adress")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"externalSourceUrl",className:"materialize-textarea",onChange:this.handleChange,value:this.state.externalSourceUrl,required:!0}),r.a.createElement("label",{htmlFor:"externalSourceUrl"},"  External Source Url")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"imageUrl",className:"materialize-textarea",onChange:this.handleChange,value:this.state.imageUrl,required:!0}),r.a.createElement("label",{htmlFor:"imageUrl"},"  Image Url Link")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"fullInfo",className:"materialize-textarea",onChange:this.handleChange,value:this.state.fullInfo,required:!0}),r.a.createElement("label",{htmlFor:"fullInfo"}," Enter Descpirtion")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"partialInfo",className:"materialize-textarea",onChange:this.handleChange,value:this.state.partialInfo,required:!0}),r.a.createElement("label",{htmlFor:"partialInfo"},"  Enter marker Descpirtion")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"latitude",className:"materialize-textarea",onChange:this.handleChange,value:this.state.latitude,required:!0}),r.a.createElement("label",{htmlFor:"latitude"}," Enter latitude")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"longitude",className:"materialize-textarea",onChange:this.handleChange,value:this.state.longitude,required:!0}),r.a.createElement("label",{htmlFor:"longitude"}," Enter longitude")),r.a.createElement("label",null,"Tags"),this.state.tags.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("textarea",{onChange:function(t){return e.handleChangeTokens(t,a)},value:t}),r.a.createElement("button",{type:"button",onClick:function(t){return e.deleteTag(a)}}," Delete Tag"))})),r.a.createElement("hr",null),r.a.createElement("button",{type:"button",id:"token",onClick:this.addToken},"Add Tag"),r.a.createElement("hr",null),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{type:"submit",className:"btn pink lighten-1",color:"red"},"Update Site"),r.a.createElement("button",{type:"button",className:"btn pink lighten-1",style:{marginLeft:"30px"}},r.a.createElement(d.b,{className:"white-text",to:"/adminPage"},"Return to Admin Menu"))))):r.a.createElement("span",null,"Loading...")}}]),t}(n.Component),Qe=function(e){function t(e){var a;Object(s.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e));var n=e.buttonName,r=e.onClickMethod,i=e.canRenderButton,c=e.searchVal,o=e.returnTo;return a.state={searchVal:c?c.split(" "):[],siteList:[],favoriteList:[],buttonName:n,returnTo:o},a.onClickMethod=r?r.bind(Object(h.a)(a)):null,a.canRenderButton=i?i.bind(Object(h.a)(a)):null,a.onSearchButtonClicked=a.onSearchButtonClicked.bind(Object(h.a)(a)),a.updateSearchValue=a.updateSearchValue.bind(Object(h.a)(a)),console.log(a.state.searchVal),a.state.searchVal.length>=1&&a.executeSearch(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onSearchButtonClicked",value:function(e){e.preventDefault(),window.location.href="/"+this.state.returnTo+"/"+this.state.searchVal}},{key:"executeSearch",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("searching road"),e.next=3,O(this.state.searchVal,["roads"]);case 3:t=e.sent,this.setState({siteList:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateSearchValue",value:function(e){this.setState({searchVal:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state,a=t.buttonName,n=t.siteList;return r.a.createElement("div",null,r.a.createElement("form",{ref:this.form,id:"search-form"},r.a.createElement("div",{className:"search-field"},r.a.createElement("input",{ref:this.searchVal,onChange:this.updateSearchValue,type:"text",required:!0})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.onSearchButtonClicked},"Search")),r.a.createElement("p",{className:"error pink-text center-align"})),r.a.createElement("div",{className:"container"},0!==n.length&&r.a.createElement($.a,{list:n,itemsPerPage:3,renderList:function(t){return t.map((function(t,n){return r.a.createElement("div",{key:n},r.a.createElement(Re,{key:n,props:t}),e.onClickMethod&&a&&e.canRenderButton(t.id)&&r.a.createElement("button",{onClick:function(a){return e.onClickMethod(a,t.id)}},a))}))}})))}}]),t}(n.Component),Xe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).canRenderButton=function(e){return"guest"!==a.state.claim&&(console.log("user is not a guest"),!a.state.favoriteList.includes(e))},a.addRoadsToFavorites=function(){var e=Object(g.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=a.state.favoriteList).push(n),xe(a.state.userid,r),a.setState({favoriteList:r});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.state={userid:"",claim:"guest",favoriteList:[],searchVal:e.match.params.searchVal?e.match.params.searchVal:""},console.log(a.state.searchVal),a.canRenderButton=a.canRenderButton.bind(Object(h.a)(a)),a.addRoadsToFavorites=a.addRoadsToFavorites.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.auth().onAuthStateChanged(function(){var e=Object(g.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=12;break}return e.next=3,he(a.uid);case 3:return n=e.sent,e.t0=t,e.t1=a.uid,e.next=8,le(a);case 8:e.t2=e.sent,e.t3=n,e.t4={userid:e.t1,claim:e.t2,favoriteList:e.t3},e.t0.setState.call(e.t0,e.t4);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(Qe,{onClickMethod:this.addRoadsToFavorites,buttonName:"Add to favorites",canRenderButton:this.canRenderButton,searchVal:this.state.searchVal,returnTo:"searchRoad"})}}]),t}(n.Component),$e=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={site_id:e.match.params.id,roadName:"",CityList:[],CountryList:[],description:"",siteList:[],haveUsersLocation:!1,markers:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.site_id,e.next=3,V(t);case 3:return a=e.sent,console.log(a),n=a.siteList,e.next=8,Promise.all(n.map(function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ye.a,e.t1={id:t},e.next=4,Ee(t);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:r=e.sent,this.setState(Object(Ye.a)({},a,{siteList:r}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.siteList;if(!e.length)return r.a.createElement("span",null,"Loading...");var t=[e[0].latitude,e[0].longitude];console.log(t);console.log(this.state);return r.a.createElement("div",null,r.a.createElement("h1",null,this.state.name),r.a.createElement("h2",null,this.state.city.join(", "),"."),r.a.createElement("h3",null,this.state.country.join(", ")),r.a.createElement("p",null,this.state.description),r.a.createElement("ul",{className:"container"},e.length>0&&r.a.createElement($.a,{list:e,itemsPerPage:3,renderList:function(e){return e.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("li",null,r.a.createElement(X,{props:e})))}))}})),r.a.createElement("div",{style:{height:"400px",width:"60%"}},r.a.createElement(We.a,{style:{height:"400px",width:"60%",marginLeft:"450px"},center:t,zoom:10},r.a.createElement(Je.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.state.haveUsersLocation?r.a.createElement(Ge.a,{position:t,icon:D},r.a.createElement(_e.a,null,"A pretty CSS3 popup. ",r.a.createElement("br",null)," Easily customizable.")):"",r.a.createElement(Ge.a,{position:t,icon:D}),this.state.siteList.map((function(e,t){return r.a.createElement(Ge.a,{key:t,position:[e.latitude,e.longitude],icon:D},r.a.createElement(_e.a,null,e.address,r.a.createElement("br",null),e.partialInfo,r.a.createElement("br",null),r.a.createElement(d.b,{to:"/site/"+e.id},"More info")))})))))}}]),t}(n.Component),et=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).DeleteRoad=function(){var e=Object(g.a)(b.a.mark((function e(t,n){var r,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.myRef.current.state.roadList,t.preventDefault(),console.log(r),i=r.find((function(e){return e.id===n})),c=r.indexOf(i),e.next=7,je(i);case 7:console.log("road"+i.name+"had deleted"),r.splice(c,1),a.setState({roadList:r});case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.myRef=r.a.createRef(),a.state={searchVal:e.match.params.searchVal?e.match.params.searchVal:"",topDownValue:"tags"},a.updateSearchValue=a.updateSearchValue.bind(Object(h.a)(a)),a.updateTopDownhValue=a.updateTopDownhValue.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"updateSearchValue",value:function(e){this.setState({searchVal:e.target.value})}},{key:"updateTopDownhValue",value:function(e){this.setState({topDownValue:e.value})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h5",{className:"grey-text text-darken-3"},"Search Road to Delete"),r.a.createElement(Qe,{ref:this.myRef,roadList:this.state.roadList,onClickMethod:this.DeleteRoad,buttonName:"Delete road",canRenderButton:function(){return!0},searchVal:this.state.searchVal,returnTo:"deleteRoad"}))}}]),t}(n.Component),tt=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={user:null},e.authListener=e.authListener.bind(Object(h.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;y.auth().onAuthStateChanged((function(t){console.log(t),t?(e.setState({user:t}),localStorage.setItem("user",t.uid)):(e.setState({user:null}),localStorage.removeItem("user"))}))}},{key:"render",value:function(){return r.a.createElement(d.a,{forceRefresh:!0},r.a.createElement("div",{className:"App"},r.a.createElement(Me,null),r.a.createElement("header",{className:"App-header"},r.a.createElement("script",{src:"https://www.gstatic.com/firebasejs/7.6.1/firebase-app.js"}),r.a.createElement("script",{src:"https://www.gstatic.com/firebasejs/7.6.1/firebase-firestore.js"}),r.a.createElement("script",{src:"https://www.gstatic.com/firebasejs/7.6.1/firebase-auth.js"}),r.a.createElement("script",{src:"https://cdn.firebase.com/libs/firebaseui/4.0.0/firebaseui.js"}),r.a.createElement("link",{rel:"manifest",href:"/manifest.json"}),r.a.createElement("link",{rel:"stylesheet",href:"styles.css"})),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/"},r.a.createElement(p.a,{to:"/LoginPage"})),r.a.createElement(p.b,{path:"/Menu",component:I}),r.a.createElement(p.b,{path:"/LoginPage",component:K}),r.a.createElement(p.b,{path:"/LogOut",component:ze}),r.a.createElement(p.b,{path:"/SignUp",component:Q}),r.a.createElement(p.b,{path:"/adminPage",component:M}),r.a.createElement(p.b,{path:"/createSite",component:Ce}),r.a.createElement(p.b,{exact:!0,path:"/deleteSite",component:Ne}),r.a.createElement(p.b,{exact:!0,path:"/deleteSite/:searchVal",component:Ne}),r.a.createElement(p.b,{exact:!0,path:"/updateSite",component:te}),r.a.createElement(p.b,{exact:!0,path:"/updateSite/:searchVal",component:te}),r.a.createElement(p.b,{exact:!0,path:"/updateForm/:id",component:Ke}),r.a.createElement(p.b,{path:"/auth",component:Ve}),r.a.createElement(p.b,{exact:!0,path:"/search",component:Ae}),r.a.createElement(p.b,{exact:!0,path:"/search/:searchVal",component:Ae}),r.a.createElement(p.b,{path:"/favorites",component:qe}),r.a.createElement(p.b,{path:"/about",component:De}),r.a.createElement(p.b,{exact:!0,path:"/site/:id",component:Ze}),r.a.createElement(p.b,{exact:!0,path:"/RoadForm",component:He}),r.a.createElement(p.b,{exact:!0,path:"/RoadForm/:searchVal",component:He}),r.a.createElement(p.b,{exact:!0,path:"/admin",component:Le}),r.a.createElement(p.b,{exact:!0,path:"/searchRoad",component:Xe}),r.a.createElement(p.b,{exact:!0,path:"/searchRoad/:searchVal",component:Xe}),r.a.createElement(p.b,{exact:!0,path:"/road/:id",component:$e}),r.a.createElement(p.b,{exact:!0,path:"/deleteRoad",component:et}),r.a.createElement(p.b,{exact:!0,path:"/deleteRoad/:searchVal",component:et}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var at=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function nt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(134),a(135),a(136),a(137),a(138);c.a.render(r.a.createElement(tt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");at?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):nt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):nt(t,e)}))}}()},93:function(e,t,a){e.exports=a(139)},98:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.f24a3924.chunk.js.map